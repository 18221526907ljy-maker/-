<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRE / OBSIDIAN ULTIMATE</title>
    <!-- React & Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fonts & Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-deep: #050505;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --accent: #d4af37; /* Champagne Gold */
            --accent-glow: rgba(212, 175, 55, 0.15);
        }
        body { 
            font-family: 'Lato', sans-serif; 
            background-color: var(--bg-deep);
            color: #e0e0e0;
            overflow: hidden; 
        }
        .font-serif { font-family: 'Playfair Display', serif; }
        
        /* Glassmorphism Card */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
        }

        /* Inputs */
        .luxury-input {
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            color: #d4af37;
            font-family: 'Playfair Display', serif;
            font-style: italic;
            transition: all 0.3s;
        }
        .luxury-input:focus {
            outline: none;
            border-bottom: 1px solid #d4af37;
            background: linear-gradient(to top, rgba(212,175,55,0.05), transparent);
        }

        /* 3D Flip */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        
        /* Animations */
        .fade-enter { opacity: 0; transform: translateY(10px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: opacity 500ms ease-out, transform 500ms ease-out; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback, useRef } = React;

        // --- Data Handling ---
        const INITIAL_DATA = [
            // A - E
            { id: 101, word: "abandon", phonetic: "/ə'bændən/", meaning: "v. 放纵；放弃", example: "The scheme's investors, fearful of bankruptcy, decided to abandon the project.", mnemonic: "a+band(乐队)+on -> 乐队在台上'放纵'演奏", userSentence: "", tags: ["再要你命3000"], nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 102, word: "abate", phonetic: "/ə'beɪt/", meaning: "v. 减轻，减少", example: "We must wait for the storm to abate.", synonyms: "mitigate, curtail, temper, ameliorate", tags: ["六选二"], mnemonic: "", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 103, word: "aberrant", phonetic: "/æ'berənt/", meaning: "adj. 异常的，非常规的", example: "Aberrant behavior can be a sign of stress.", synonyms: "anomaly", tags: ["再要你命3000"], mnemonic: "ab(离)+err(错误)+ant -> 离家出走犯错 -> 异常的", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 104, word: "cacophony", phonetic: "/kə'kɒfəni/", meaning: "n. 刺耳的声音", example: "A cacophony of deafening alarm bells.", tags: ["GRE核心"], mnemonic: "caco(坏)+phon(声音)", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 105, word: "enervate", phonetic: "/'enəveɪt/", meaning: "v. 使衰弱", example: "The heat enervated us all.", tags: ["易混淆"], mnemonic: "e(出)+nerv(神经) -> 神经出来了 -> 衰弱", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 106, word: "ephemeral", phonetic: "/ɪ'femərəl/", meaning: "adj. 短暂的", example: "Fashions are ephemeral, changing with every season.", synonyms: "transient, evanescent", tags: ["高频"], mnemonic: "", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            
            // F - P
            { id: 107, word: "garrulous", phonetic: "/'ɡærələs/", meaning: "adj. 唠叨的，多嘴的", example: "He became positively garrulous after a few glasses of wine.", synonyms: "loquacious, verbose", tags: ["阅读机经"], mnemonic: "", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 108, word: "iconoclast", phonetic: "/aɪ'kɒnəklæst/", meaning: "n. 特立独行的人；打破旧习者", example: "Ideally, the press should be an iconoclast.", tags: ["镇考3000"], mnemonic: "icon(偶像)+clast(打碎) -> 打碎偶像的人", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 109, word: "mitigate", phonetic: "/'mɪtɪɡeɪt/", meaning: "v. 缓和，减轻", example: "Emergency funds are being provided to mitigate the effects of the disaster.", synonyms: "abate, curtail, temper, ameliorate", tags: ["六选二同义词"], mnemonic: "", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 110, word: "proliferate", phonetic: "/prə'lɪfəreɪt/", meaning: "v. 激增，繁殖", example: "Small businesses have proliferated in the last ten years.", synonyms: "abound", tags: ["六选二同义词"], mnemonic: "pro(前)+life(生命)+rate -> 生命力向前的速率 -> 繁殖", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            
            // Q - Z
            { id: 111, word: "quiescent", phonetic: "/kwi'esnt/", meaning: "adj. 静止的，不活动的", example: "Strikes were headed by groups of workers who had previously been quiescent.", synonyms: "abeyant, calm", tags: ["六选二同义词"], mnemonic: "quiet+scent", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 112, word: "tacit", phonetic: "/'tæsɪt/", meaning: "adj. 缄默的；不言而喻的", example: "There was a tacit agreement that he would pay for the meal.", tags: ["阅读机经"], mnemonic: "", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 113, word: "unanimous", phonetic: "/ju'nænɪməs/", meaning: "adj. 一致同意的", example: "The decision was unanimous.", tags: ["再要你命3000"], mnemonic: "uni(一)+anim(精神) -> 一个精神 -> 一致", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 114, word: "vile", phonetic: "/vaɪl/", meaning: "adj. 丑陋的；卑鄙的", example: "A vile smell.", tags: ["再要你命3000"], mnemonic: "", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 115, word: "wrest", phonetic: "/rest/", meaning: "v. 抢夺；费力取得", example: "They attempted to wrest control of the town.", tags: ["镇考3000"], mnemonic: "wrestle(摔跤) -> 抢夺", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 116, word: "xenophobic", phonetic: "/ˌzenəˈfəʊbɪk/", meaning: "adj. 排外的，恐惧外国人的", example: "The French are proud and highly xenophobic when it comes to cooking.", tags: ["镇考3000"], mnemonic: "xeno(外)+phobia(恐惧)", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 117, word: "yearn", phonetic: "/jɜːn/", meaning: "v. 渴望，向往", example: "The people yearned for peace.", tags: ["镇考3000"], mnemonic: "", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
            { id: 118, word: "zealot", phonetic: "/'zelət/", meaning: "n. 狂热者", example: "I am an index believer, but not a zealot.", synonyms: "extremist, ideologue", tags: ["镇考3000"], mnemonic: "zeal(热情)+lot(多) -> 热情太多 -> 狂热者", userSentence: "", nextReview: Date.now(), interval: 0, ease: 2.5 },
        ];

        // SRS Logic (Ebbinghaus)
        const calculateNextReview = (card, quality) => {
            let { interval, ease, reviewCount = 0 } = card;
            if (quality === 0) {
                interval = 0;
                reviewCount = 0;
            } else {
                if (reviewCount === 0) interval = 1;
                else if (reviewCount === 1) interval = 3; 
                else interval = Math.round(interval * ease);
                reviewCount++;
            }
            ease = Math.max(1.3, ease + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02)));
            // Realtime calc
            let nextReviewTime = interval === 0 ? Date.now() + 60000 : Date.now() + (interval * 24 * 60 * 60 * 1000); 
            return { ...card, interval, ease, reviewCount, nextReview: nextReviewTime };
        };

        const App = () => {
            const [cards, setCards] = useState(() => {
                const saved = localStorage.getItem('gre_luxury_cards_v5');
                return saved ? JSON.parse(saved) : INITIAL_DATA;
            });
            const [view, setView] = useState('home'); 
            const [queue, setQueue] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [flipped, setFlipped] = useState(false);
            const [settings, setSettings] = useState(() => {
                const saved = localStorage.getItem('gre_luxury_settings_v5');
                return saved ? JSON.parse(saved) : { contextMode: false };
            });
            
            const fileInputRef = useRef(null);

            // Persist Data & Settings
            useEffect(() => localStorage.setItem('gre_luxury_cards_v5', JSON.stringify(cards)), [cards]);
            useEffect(() => localStorage.setItem('gre_luxury_settings_v5', JSON.stringify(settings)), [settings]);

            // Stats
            const stats = useMemo(() => {
                const now = Date.now();
                return {
                    total: cards.length,
                    due: cards.filter(c => c.nextReview <= now).length,
                    mastered: cards.filter(c => c.interval > 21).length,
                    hard: cards.filter(c => c.ease < 2.3 && c.reviewCount > 0).length // "Mistake Notebook" logic
                };
            }, [cards]);

            // Keyboard Shortcuts
            useEffect(() => {
                const handleKey = (e) => {
                    if (view !== 'study') return;
                    if (e.code === 'Space') {
                        e.preventDefault();
                        setFlipped(prev => !prev);
                    }
                    if (flipped) {
                        if (e.key === '1') handleRate(0); 
                        if (e.key === '2') handleRate(3); 
                        if (e.key === '3') handleRate(4); 
                        if (e.key === '4') handleRate(5); 
                    }
                };
                window.addEventListener('keydown', handleKey);
                return () => window.removeEventListener('keydown', handleKey);
            }, [view, flipped, currentIndex, queue]);

            const startSession = (mode = 'normal') => {
                const now = Date.now();
                let q = [];
                if (mode === 'normal') {
                    q = cards.filter(c => c.nextReview <= now).sort((a,b) => a.nextReview - b.nextReview);
                } else if (mode === 'hard') {
                    q = cards.filter(c => c.ease < 2.3 && c.reviewCount > 0);
                }
                
                if (q.length === 0) {
                    alert(mode === 'hard' ? "错题本空空如也，太棒了！" : "当前没有复习任务！");
                    return;
                }
                setQueue(q);
                setCurrentIndex(0);
                setFlipped(false);
                setView('study');
            };

            const handleRate = (quality) => {
                const currentCard = queue[currentIndex];
                const updated = calculateNextReview(currentCard, quality);
                setCards(prev => prev.map(c => c.id === updated.id ? updated : c));

                if (currentIndex < queue.length - 1) {
                    setFlipped(false);
                    setTimeout(() => setCurrentIndex(prev => prev + 1), 200); 
                } else {
                    setView('home');
                }
            };

            // Update Mnemonic/Sentence
            const updateCardField = (id, field, value) => {
                const updatedQueue = [...queue];
                updatedQueue[currentIndex] = { ...updatedQueue[currentIndex], [field]: value };
                setQueue(updatedQueue); 
                setCards(prev => prev.map(c => c.id === id ? { ...c, [field]: value } : c)); 
            };

            const handleImportText = (text) => {
                const lines = text.split('\n').filter(l => l.trim());
                const newCards = lines.map((line, idx) => {
                    const parts = line.split(/,|\t/); 
                    return {
                        id: Date.now() + idx,
                        word: parts[0]?.trim() || "Unknown",
                        meaning: parts[1]?.trim() || "No definition",
                        example: parts[2]?.trim() || "No context provided.",
                        mnemonic: "",
                        userSentence: "",
                        tags: ["Imported"],
                        nextReview: Date.now(),
                        interval: 0,
                        ease: 2.5
                    };
                });
                setCards([...cards, ...newCards]);
                alert(`成功注入 ${newCards.length} 条数据到记忆库。`);
                setView('home');
            };

            // --- Backup & Restore Functions ---
            const exportData = () => {
                const dataStr = JSON.stringify(cards);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                const exportFileDefaultName = `gre_backup_${new Date().toISOString().slice(0,10)}.json`;
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            };

            const triggerFileInput = () => {
                fileInputRef.current.click();
            };

            const handleFileImport = (e) => {
                const fileReader = new FileReader();
                fileReader.readAsText(e.target.files[0], "UTF-8");
                fileReader.onload = (e) => {
                    try {
                        const importedCards = JSON.parse(e.target.result);
                        if (Array.isArray(importedCards)) {
                            if(confirm(`检测到备份文件包含 ${importedCards.length} 个单词。\n是否覆盖当前进度？`)) {
                                setCards(importedCards);
                                alert("数据恢复成功！");
                                setView('home');
                            }
                        } else {
                            alert("文件格式错误，请使用本应用导出的 JSON 文件。");
                        }
                    } catch (error) {
                        alert("解析失败: " + error);
                    }
                };
            };

            const resetData = () => {
                if(confirm("警告：确定要重置所有数据吗？这将清空所有进度和笔记！")) {
                    setCards(INITIAL_DATA);
                    localStorage.removeItem('gre_luxury_cards_v5');
                    alert("已重置为初始状态。");
                    setView('home');
                }
            }

            return (
                <div className="h-screen w-full flex flex-col items-center justify-center relative bg-black text-gray-200">
                    {/* Background Texture */}
                    <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 pointer-events-none"></div>
                    <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#d4af37] to-transparent opacity-50"></div>

                    {/* Navbar */}
                    <div className="absolute top-0 w-full p-6 flex justify-between items-center z-20 text-gray-500 text-xs tracking-[0.2em] uppercase font-sans">
                        <div className="flex gap-6">
                            <span className={`cursor-pointer hover:text-[#d4af37] transition ${view === 'home' ? 'text-white' : ''}`} onClick={() => setView('home')}>GRE / Obsidian</span>
                            <span className="cursor-pointer hover:text-white transition flex items-center gap-2" onClick={() => startSession('hard')}>
                                <i className="fas fa-exclamation-circle text-red-500"></i> 错题本 ({stats.hard})
                            </span>
                            <span className="cursor-pointer hover:text-white transition" onClick={() => setView('data')}>数据管理</span>
                        </div>
                        <div className="flex items-center gap-4">
                            <label className="flex items-center gap-2 cursor-pointer hover:text-white transition" title="语境模式：正面显示例句，背面显示单词">
                                <div className={`w-3 h-3 border border-gray-600 ${settings.contextMode ? 'bg-[#d4af37] border-[#d4af37]' : ''}`}></div>
                                <span>Context Mode</span>
                                <input type="checkbox" className="hidden" checked={settings.contextMode} onChange={() => setSettings(s => ({...s, contextMode: !s.contextMode}))} />
                            </label>
                            <span className="hidden md:inline">Total: {stats.total}</span>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="z-10 w-full max-w-5xl px-4">
                        
                        {/* HOME VIEW */}
                        {view === 'home' && (
                            <div className="flex flex-col md:flex-row gap-16 items-center justify-center animate-fade-in h-[70vh]">
                                <div className="text-left max-w-lg">
                                    <div className="w-12 h-1 bg-[#d4af37] mb-8"></div>
                                    <h1 className="font-serif text-6xl md:text-8xl text-white mb-6 leading-none">
                                        Verbal <br/>
                                        <span className="text-[#d4af37] italic">Mastery.</span>
                                    </h1>
                                    <p className="text-gray-400 text-lg mb-10 font-light leading-relaxed">
                                        基于艾宾浩斯遗忘曲线。<br/>
                                        内置 <span className="text-white">错题自动归档</span> 与 <span className="text-white">记忆宫殿</span>。<br/>
                                        <span className="text-xs text-[#d4af37] mt-2 block uppercase tracking-widest">Permanent Storage Enabled</span>
                                    </p>
                                    <button 
                                        onClick={() => startSession('normal')}
                                        className="group relative px-8 py-4 bg-transparent border border-gray-700 text-white font-bold tracking-widest overflow-hidden transition-all hover:border-[#d4af37]"
                                    >
                                        <span className="absolute inset-0 w-full h-full bg-[#d4af37] transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-out"></span>
                                        <span className="relative group-hover:text-black transition-colors">START SESSION</span>
                                    </button>
                                </div>
                                
                                <div className="hidden md:block w-px h-64 bg-gradient-to-b from-transparent via-gray-700 to-transparent"></div>
                                
                                <div className="text-right space-y-8">
                                    <div>
                                        <div className="text-4xl text-white font-serif">{stats.due}</div>
                                        <div className="text-xs text-[#d4af37] uppercase tracking-widest mt-1">Due Today</div>
                                    </div>
                                    <div>
                                        <div className="text-4xl text-white font-serif">{stats.mastered}</div>
                                        <div className="text-xs text-gray-500 uppercase tracking-widest mt-1">Mastered</div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* STUDY VIEW */}
                        {view === 'study' && queue.length > 0 && (
                            <div className="flex flex-col items-center animate-fade-in">
                                {/* Progress */}
                                <div className="w-full max-w-xl flex justify-between text-[10px] text-gray-500 uppercase tracking-widest mb-4">
                                    <span>Card {currentIndex + 1}</span>
                                    <span>Remaining {queue.length - currentIndex}</span>
                                </div>

                                <div 
                                    className="relative w-full max-w-2xl h-[550px] perspective-1000 cursor-pointer group"
                                    onClick={(e) => {
                                        if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                                        setFlipped(!flipped);
                                    }}
                                >
                                    <div className={`relative w-full h-full transition-transform duration-700 transform-style-3d ${flipped ? 'rotate-y-180' : ''}`}>
                                        
                                        {/* FRONT */}
                                        <div className="absolute w-full h-full glass-card backface-hidden flex flex-col items-center justify-center p-16 text-center">
                                            {settings.contextMode ? (
                                                <div className="space-y-8">
                                                    <span className="text-xs text-[#d4af37] tracking-[0.2em] uppercase">Context Challenge</span>
                                                    <p className="font-serif text-3xl text-gray-200 leading-normal italic">
                                                        "{queue[currentIndex].example.replace(new RegExp(queue[currentIndex].word, 'gi'), '_____')}"
                                                    </p>
                                                    <p className="text-xs text-gray-600 mt-8">[ Tap to Reveal ]</p>
                                                </div>
                                            ) : (
                                                <div className="space-y-6">
                                                    <span className="text-xs text-gray-600 tracking-[0.2em] uppercase">Word</span>
                                                    <h2 className="font-serif text-7xl text-white tracking-tight">{queue[currentIndex].word}</h2>
                                                    <p className="font-serif text-2xl text-[#d4af37] italic opacity-80">{queue[currentIndex].phonetic}</p>
                                                    <p className="absolute bottom-12 text-xs text-gray-600">[ Space to Flip ]</p>
                                                </div>
                                            )}
                                        </div>

                                        {/* BACK */}
                                        <div className="absolute w-full h-full glass-card backface-hidden rotate-y-180 flex flex-col p-12 bg-[#0a0a0a] border border-[#d4af37]/20">
                                            <div className="flex-1 overflow-y-auto pr-2 custom-scrollbar">
                                                <div className="flex justify-between items-baseline border-b border-gray-800 pb-4 mb-6">
                                                    <h2 className="text-3xl font-serif text-white">{queue[currentIndex].word}</h2>
                                                    <span className="text-xs text-gray-500 uppercase tracking-widest">{queue[currentIndex].ease < 2.3 ? 'Hard' : 'Normal'}</span>
                                                </div>

                                                <div className="mb-8">
                                                    <p className="text-xl text-gray-200 font-light mb-2">{queue[currentIndex].meaning}</p>
                                                    {queue[currentIndex].synonyms && (
                                                        <p className="text-sm text-gray-500"><span className="text-[#d4af37]">Syn:</span> {queue[currentIndex].synonyms}</p>
                                                    )}
                                                </div>

                                                <div className="mb-6">
                                                    <p className="text-sm text-gray-500 uppercase tracking-widest mb-2">Context</p>
                                                    <p className="text-gray-300 italic border-l-2 border-[#d4af37] pl-4">"{queue[currentIndex].example}"</p>
                                                </div>

                                                <div className="grid grid-cols-1 gap-6 mt-8 pt-6 border-t border-gray-800">
                                                    <div>
                                                        <label className="text-[10px] text-[#d4af37] uppercase tracking-widest mb-2 block">Memory Palace (记忆宫殿)</label>
                                                        <input 
                                                            type="text" 
                                                            className="luxury-input w-full text-sm pb-2"
                                                            placeholder="Add your mnemonic hook..."
                                                            value={queue[currentIndex].mnemonic}
                                                            onChange={(e) => updateCardField(queue[currentIndex].id, 'mnemonic', e.target.value)}
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="text-[10px] text-gray-500 uppercase tracking-widest mb-2 block">Sentence Mining (我的造句)</label>
                                                        <input 
                                                            type="text" 
                                                            className="luxury-input w-full text-sm pb-2 text-gray-300 border-gray-700"
                                                            placeholder="Create a personal sentence..."
                                                            value={queue[currentIndex].userSentence}
                                                            onChange={(e) => updateCardField(queue[currentIndex].id, 'userSentence', e.target.value)}
                                                        />
                                                    </div>
                                                </div>
                                            </div>

                                            <div className="grid grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-800">
                                                <button onClick={(e) => {e.stopPropagation(); handleRate(0);}} className="text-[10px] uppercase text-red-400 hover:text-white py-3 hover:bg-red-900/20 transition tracking-widest">Forget</button>
                                                <button onClick={(e) => {e.stopPropagation(); handleRate(3);}} className="text-[10px] uppercase text-orange-400 hover:text-white py-3 hover:bg-orange-900/20 transition tracking-widest">Hard</button>
                                                <button onClick={(e) => {e.stopPropagation(); handleRate(4);}} className="text-[10px] uppercase text-blue-400 hover:text-white py-3 hover:bg-blue-900/20 transition tracking-widest">Good</button>
                                                <button onClick={(e) => {e.stopPropagation(); handleRate(5);}} className="text-[10px] uppercase text-green-400 hover:text-white py-3 hover:bg-green-900/20 transition tracking-widest">Easy</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* DATA / IMPORT VIEW */}
                        {view === 'data' && (
                            <div className="glass-card p-12 max-w-4xl mx-auto animate-fade-in">
                                <h2 className="font-serif text-3xl text-white mb-8 border-b border-gray-800 pb-4">Data Management</h2>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
                                    {/* Import Section */}
                                    <div>
                                        <h3 className="text-[#d4af37] text-sm uppercase tracking-widest mb-4">Add New Words</h3>
                                        <p className="text-gray-500 text-xs mb-4">Paste from Excel/CSV (Word, Meaning, Example)</p>
                                        <textarea 
                                            className="w-full h-40 bg-[#0a0a0a] border border-gray-800 text-gray-300 p-4 font-mono text-xs focus:border-[#d4af37] outline-none resize-none mb-4 custom-scrollbar"
                                            placeholder={`Format:\nabandon, 放弃, He abandoned the project.\n...`}
                                            id="importArea"
                                        ></textarea>
                                        <button 
                                            onClick={() => handleImportText(document.getElementById('importArea').value)} 
                                            className="w-full py-3 bg-gray-800 text-white font-bold hover:bg-gray-700 transition text-xs uppercase tracking-widest"
                                        >
                                            Inject Text Data
                                        </button>
                                    </div>

                                    {/* Backup Section */}
                                    <div className="flex flex-col justify-between">
                                        <div>
                                            <h3 className="text-[#d4af37] text-sm uppercase tracking-widest mb-4">Backup & Restore</h3>
                                            <p className="text-gray-500 text-xs mb-6">
                                                Download your progress to keep it safe. Restore it on any device.
                                            </p>
                                            
                                            <div className="space-y-4">
                                                <button 
                                                    onClick={exportData}
                                                    className="w-full py-4 border border-[#d4af37] text-[#d4af37] hover:bg-[#d4af37] hover:text-black transition text-xs uppercase tracking-widest font-bold flex items-center justify-center gap-2"
                                                >
                                                    <i className="fas fa-download"></i> Download Backup (.json)
                                                </button>

                                                <input 
                                                    type="file" 
                                                    ref={fileInputRef} 
                                                    onChange={handleFileImport} 
                                                    className="hidden" 
                                                    accept=".json"
                                                />
                                                <button 
                                                    onClick={triggerFileInput}
                                                    className="w-full py-4 border border-gray-700 text-gray-400 hover:border-white hover:text-white transition text-xs uppercase tracking-widest flex items-center justify-center gap-2"
                                                >
                                                    <i className="fas fa-upload"></i> Restore from Backup
                                                </button>
                                            </div>
                                        </div>

                                        <div className="mt-8 pt-8 border-t border-gray-800">
                                            <button 
                                                onClick={resetData}
                                                className="text-red-900 hover:text-red-500 text-xs uppercase tracking-widest transition"
                                            >
                                                Danger Zone: Reset All Data
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="mt-8 text-center">
                                    <button onClick={() => setView('home')} className="text-gray-500 hover:text-white text-xs uppercase tracking-widest">Back to Dashboard</button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
